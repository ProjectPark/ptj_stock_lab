# 전략 노트 — 태준 매매 전략 전체 리뷰 (taejun_attach_pattern)

> 작성일: 2026-02-19
> 출처: kakaotalk_trading_notes_2026-02-19.csv (박태준)
> 엔진: strategies/taejun_attach_pattern/

---

## 요약

박태준 매매 전략 11개를 `taejun_attach_pattern` 엔진으로 구현 완료.
본 문서는 전략별 상세 정리, 현재 Critical 이슈, 확인이 필요한 모호한 지표를 기록한다.

---

## 1. 전략 일람 (11개)

| # | 전략명 | 코드 파일 | 유형 | 종목 | 목표 수익 |
|---|--------|----------|------|------|----------|
| A | 잽모드 SOXL | `jab_soxl.py` | 프리마켓 단타 | SOXL | +0.9% |
| B | 잽모드 BITU | `jab_bitu.py` | 프리마켓 단타 | BITU | +0.9% |
| C | 잽모드 TSLL | `jab_tsll.py` | 소액 단타 | TSLL | +1.0% |
| D | 숏 잽모드 SETH | `jab_seth.py` | 숏 단타 | SETH | +0.5% |
| E | VIX → GDXU | `vix_gold.py` | 이벤트 드리븐 | GDXU → IAU | +10% |
| F | S&P500 편입 | `sp500_entry.py` | 이벤트 드리븐 | 편입 기업 | +1.5% |
| G | 저가매수 | `bargain_buy.py` | 스윙/장기 | 11종목 | 종목별 상이 |
| H | 숏포지션 전환 | `short_macro.py` | 매크로 | GDXU | +90% |
| I | 리츠 리스크 | `reit_risk.py` | 리스크 관리 | - | - |
| J | 섹터 로테이션 | `sector_rotate.py` | 순환 배분 | SOXL/ROBN/GDXU | - |
| K | 조건부 은행주 | `bank_conditional.py` | 역전 매매 | BAC | +0.5% |

---

## 2. 전략별 상세

### A. 잽모드 SOXL (Jab-SOXL)

> 반도체 개별주 모두 상승인데 SOXX/SOXL만 마이너스 → 레버리지 괴리 역전

| 항목 | 내용 |
|------|------|
| 진입 시간 | 17:30 KST ~ 장마감 |
| 매수 대상 | SOXL |
| 매수 비중 | 전액 |
| 목표 수익률 | +0.9% (수수료 제외) |
| 매도 방식 | 전액 매도 |

**진입 조건 (16개 ALL 충족):**

| # | 종목/지표 | 조건 | 비고 |
|---|----------|------|------|
| 1 | Polymarket NASDAQ | >= 51% | |
| 2 | GLD | >= +0.1% | |
| 3 | QQQ | >= +0.3% | |
| 4 | SOXX | <= -0.2% | 지수는 마이너스 |
| 5 | **SOXL** | <= -0.6% | 매수 대상, 과매도 |
| 6 | NVDA | >= +0.9% | |
| 7 | AMD | >= +0.9% | |
| 8 | SMCI | >= +1.0% | |
| 9 | KLA | >= +0.8% | |
| 10 | AMAT | >= +0.8% | |
| 11 | AVGO | >= +0.55% | |
| 12 | MPWR | >= +0.55% | |
| 13 | TXN | >= +0.66% | |
| 14 | ASML | >= +1.0% | |
| 15 | LRCX | >= +0.8% | |
| 16 | MU | >= +0.55% | |

---

### B. 잽모드 BITU (Jab-BITU)

> BTC 생태계 상승 + BITU 과매도 → 역전

| 항목 | 내용 |
|------|------|
| 진입 시간 | 17:30 KST ~ 장마감 |
| 매수 대상 | BITU |
| 매수 비중 | 전액 |
| 목표 수익률 | +0.9% (수수료 제외) |
| 매도 방식 | 전액 매도 |

**진입 조건 (ALL 충족):**

| # | 종목/지표 | 조건 |
|---|----------|------|
| 1 | Polymarket BTC | >= 63% |
| 2 | GLD | >= +0.1% |
| 3 | **BITU** | <= -0.4% |
| 4 | BTC (스팟) | >= +0.9% |
| 5 | ETH (스팟) | >= +0.9% |
| 6 | SOL (스팟) | >= +2.0% |
| 7 | XRP (스팟) | >= +5.0% |

---

### C. 잽모드 TSLL (Jab-TSLL)

> TSLA 상승 + TSLL 과매도 → 소액 역전

| 항목 | 내용 |
|------|------|
| 진입 시간 | 17:30 KST ~ 장마감 |
| 매수 대상 | TSLL |
| 매수 비중 | **200만원 이하 소액** |
| 목표 수익률 | +1.0% (수수료 제외) |
| 매도 방식 | 전액 매도 → 현금 보유 |

**진입 조건 (ALL 충족):**

| # | 종목/지표 | 조건 |
|---|----------|------|
| 1 | Polymarket NASDAQ | >= 63% |
| 2 | GLD | <= +0.3% |
| 3 | **TSLL** | <= -0.8% |
| 4 | TSLA | >= +0.5% |
| 5 | QQQ | >= +0.7% |

---

### D. 숏 잽모드 SETH (Jab-SETH)

> ETH 하락 기대 높을 때 숏 ETF

| 항목 | 내용 |
|------|------|
| 매수 대상 | SETH |
| 목표 수익률 | +0.5% (수수료 제외) |
| 매도 방식 | 전액 매도 |

**진입 조건:**

| # | 종목/지표 | 조건 |
|---|----------|------|
| 1 | Polymarket ETH 하락 기대 | >= 12% |
| 2 | GLD | >= +0.01% |
| 3 | SETH | >= 0.00% (양전) |

---

### E. VIX → GDXU (VIX-Gold)

> 공포 지수 급등 → 금광 3x 매수

| 항목 | 내용 |
|------|------|
| 매수 대상 | GDXU (금광 3x) |
| 매수 비중 | 전액 |
| 목표 수익률 | +10% |
| 매도 후 | 수익 전액 → IAU 매수 (정정: GLD → IAU) |

**진입 조건:**

| # | 지표 | 조건 |
|---|------|------|
| 1 | VIX 일간 변동 | >= +10% |
| 2 | Polymarket 하락 기대 | >= 30% |

---

### F. S&P500 편입 기업 (SP500-Entry)

> 신규 편입 다음 날 매수

| 항목 | 내용 |
|------|------|
| 매수 대상 | 편입 기업 (흑자 한정) |
| 매수 비중 | 전액 |
| 목표 수익률 | +1.5% (수수료 제외) |
| 금지 조건 | GLD 상승시, Polymarket NASDAQ < 51% |

---

### G. 저가매수 (Bargain-Buy)

> 3년 최고가 대비 폭락시 진입

| 종목 | 하락 진입 | 추가매수 조건 | 목표 | 분할매도 | 수익금 행선지 | 비고 |
|------|----------|-------------|------|---------|-------------|------|
| CONL | -80% | -3% 추가 하락 | +188% | 전액 | CONL 30일 분할 | 스윙 |
| SOXL | -90.5% | -5% | +320% | 6회 | SOXL 30일 분할 | |
| AMDL | -89% | -5% | +40% | 6회 | SOXL 30일 분할 | |
| NVDL | -73% | -5% | +200% | 6회 | SOXL 30일 분할 | |
| ROBN | -83% | -3% | +200% | 6회 | CONL 30일 분할 | |
| ETHU | -95% | -10% 추가시 10% 더 | +20% | 6회 | ROBN 100일 분할 | |
| BRKU | -32% | -3% | +0.5% | 전액 | 현금화 | 단기 |
| NFXL | -26% | -20% | +0.9% | 전액 | 현금화 | 단기 |
| SNXX | -46% | -10% | +3% | 전액 | 현금화 | 단기 |
| OKLL | -55% | -12% | +3% | 전액 | 현금화 | 단기 |
| PLTU | -44% | -10% | +10% | 전액 | 현금화 | 20일 기한 |

**저가매수 금지 조건:** 유상증자 / 투자자 기대치 낮음 / 3일 전후 거래량 감소 / 금 하락 / Poly 상승 49% 이하

---

### H. 숏포지션 전환 (Short-Macro)

> 나스닥/S&P500 ATH → 전면 숏 전환

| 항목 | 내용 |
|------|------|
| 진입 조건 | 나스닥/S&P500 역대 최고가 |
| 행동 | GDXU/IAU/GLD/현금 제외 모든 롱 매도 |
| GDXU | 100% 구축, +90% 매도 |
| 매도 후 | 수익 전액 → IAU 매수 |
| 청산 | 전액 매도 (정정: 분할매도 → 전액매도) |

---

### I. 리츠 리스크 (REIT-Risk)

> 리츠 과열 → 레버리지 90일 금지

| 조건 | 기준 |
|------|------|
| 리츠 7일 연속 상승 | SK리츠, TIGER리츠, 롯데리츠 평균 +0.1% |
| 탐욕지수 | >= 75 |
| 행동 | GDXU 제외 레버리지 매매 90일 중단 |

---

### J. 섹터 로테이션 (Sector-Rotate)

> 4대 섹터 수익률 비교 → 다음 섹터 정기 매수

| 1위 섹터 | 매수 대상 | 주기 |
|---------|----------|------|
| 비트코인 | SOXL 1주 | 3일 1회 |
| 반도체 | ROBN | 7일 1회 |
| 은행 | GDXU | 14일 1회 |

---

### K. 조건부 은행주 (Bank-Conditional)

> 대형은행 전부 상승 + BAC만 하락 → 역전 기대

| 항목 | 내용 |
|------|------|
| 감시 종목 | JPM, HSBC, WFC, RBC, C (모두 양전) |
| 매수 대상 | BAC (마이너스) |
| 매수 금액 | 300만원 |
| 목표 | +0.5% (수수료 포함) |
| 매도 후 | 현금화 |

---

## 3. 정정 사항 반영 이력

| 원본 | 정정 | 출처 |
|------|------|------|
| GDXU 매도 후 GLD 매수 | **IAU** 매수 | 2026.2.18 18:57 |
| 부동산 선행지수 하락시 분할매도 | **전액 매도** (분할 아님) | 2026.2.18 19:56 |
| PLTU 하락 43% 진입 | **44%** 진입 | 2026.2.18 22:10 정리본 |
| BRKU 하락 26% 진입 | **30~32%** 진입 | 초기 26% → 정리본 30% → 최종 32% |

---

## 4. Critical 이슈 (반드시 수정 필요)

### C-1. 수수료 미반영 목표 판정

**현상:** 모든 전략의 `check_exit`이 gross pnl%로 목표를 판정한다. CSV 원본은 "수수료 제외" 기준.

**영향:**

| 전략 | 목표 (net) | 왕복 수수료 | 필요 세전 | 현재 코드 | 차이 |
|------|-----------|-----------|----------|----------|------|
| jab_soxl | 0.9% | 0.703% | **1.603%** | 0.9% | -0.703% |
| jab_bitu | 0.9% | 0.703% | **1.603%** | 0.9% | -0.703% |
| jab_tsll | 1.0% | 0.703% | **1.703%** | 1.0% | -0.703% |
| jab_seth | 0.5% | 0.703% | **1.203%** | 0.5% | -0.703% |
| sp500_entry | 1.5% | 0.703% | **2.203%** | 1.5% | -0.703% |
| bank_conditional | 0.5% **(포함)** | 0.703% | **0.5%** | 0.5% (gross) | **반대 방향 오류** |

**해결:** `FeeCalculator.is_target_met(entry_price, current_price, target_net_pct)` 사용

---

### C-2. 추가매수시 평균가 단위 불일치

**현상:** `portfolio.py`에서 최초 매수는 `avg_price = 시장가`, 추가매수 합산은 `net_for_shares`(수수료 차감) 사용 → 단위 혼용

**영향:** 추가매수 후 pnl 계산이 틀림

**해결:** 둘 다 시장가 기준으로 통일

---

### C-3. bargain_buy 초기 진입 size 하드코딩

**현상:** 모든 종목 `size=0.5` 고정. CSV에서는 종목별로 50%~80% 차이 있음.

**영향:** CONL은 80% 매수해야 하는데 50%로 진입

**해결:** params에 종목별 `entry_size` 추가

---

## 5. Warning 이슈

| # | 내용 | 파일 | 메모 |
|---|------|------|------|
| W-1 | signal.size > 1.0 방어 없음 → 음수 포지션 | portfolio.py | min() 클램프 필요 |
| W-2 | KRW→USD 환율 1350 하드코딩 | portfolio.py | MarketData에서 주입 |
| W-3 | 복수 저가매수 조건 충족시 첫 종목만 반환 | bargain_buy.py | 리스트 반환 or 우선순위 |
| W-4 | `_last_buy_dates`, `_ban_until` 재시작시 초기화 | sector_rotate, reit_risk | 영속 저장 필요 (실서빙시) |
| W-5 | `datetime.now()` 백테스트 불일치 | reit_risk.py | market.time 사용 |
| W-6 | BUY 시그널에 ticker="" 반환 | sp500_entry.py | SKIP 또는 metadata |
| W-7 | jab_seth 시간 조건(17:30) 누락 | jab_seth.py | 다른 잽모드와 불일치 |
| W-8 | registry name="" 방어 없음 | registry.py | assert 추가 |
| W-9 | MarketData 입력 검증 없음 | base.py | __post_init__ 추가 |

---

## 6. 확인 필요 — 모호하거나 이상한 지표

아래 항목들은 CSV 원문이 모호하거나, 조건이 현실적으로 달성 어렵거나, 해석이 여러 가지 가능한 것들입니다.
**태준님 확인 후 반영이 필요합니다.**

### Q-1. XRP >= +5.0% (잽모드 BITU 조건)

> CSV: `XXRP +5.0% 이상`

- 다른 코인(BTC +0.9%, ETH +0.9%, SOL +2.0%)에 비해 **XRP만 5%로 극단적으로 높음**
- XRP가 하루에 +5% 이상 움직이는 날은 매우 드물어서, 이 조건 때문에 잽모드 BITU 진입 자체가 거의 불가능할 수 있음
- **확인:** 5%가 맞는지? 혹시 0.5% 또는 2.0%?

---

### Q-2. SETH 진입 조건 "하락이 12퍼센트 이하"

> CSV: `POLYAMARKET ETH 기준 하락이 12퍼센트 이하인경우`

- **해석 1:** Polymarket에서 ETH 하락 확률이 12% 이하 → 하락 가능성 낮은데 왜 숏?
- **해석 2:** Polymarket에서 ETH 가격이 12% 이하로 떨어질 거라는 예측 → 숏 진입
- 현재 코드: `1 - eth_up >= 0.12` (eth_up이 88% 이하 = 하락 확률 12% 이상)
- **확인:** 어느 해석이 맞는지?

---

### Q-3. CONL 목표 수익률 +188%

> CSV: `188% 상승까지 홀딩`

- 2배 레버리지 ETF가 +188% 상승하려면 기초자산이 약 +94% 상승해야 함
- CONL(코인베이스 2x)이 -80% 폭락 후 원래 가격으로 복귀하면: `12.5 → 62.5 = +400%`이므로 이론적으로 가능하긴 함
- 하지만 레버리지 ETF의 시간가치 감쇠(volatility decay)로 실제 회복률은 훨씬 낮을 수 있음
- **확인:** 188이라는 숫자의 근거? 혹시 다른 수치?

---

### Q-4. SOXL 진입 조건 -90.5%

> CSV: `하락폭이 최저가 90.5 퍼센트 의 폭락이 나온경우`

- 3년 최고가 대비 -90.5% → 3배 레버리지 ETF에서는 가능 (기초자산 ~30% 하락시)
- **그런데 90.5%라는 소수점이 매우 구체적** — 과거 특정 시점 기준인지?
- 다른 종목은 정수% (80, 89, 73 등)
- **확인:** 90.5%가 정확한 값인지? 90%?

---

### Q-5. 잽모드 GLD 조건 방향 불일치

> - 잽모드 SOXL: `GLD >= +0.1%` (금 상승 OK)
> - 잽모드 BITU: `GLD >= +0.1%` (금 상승 OK)
> - 잽모드 TSLL: `GLD <= +0.3%` (금 상승 제한)
> - 잽모드 SETH: `GLD >= +0.01%` (금 양전)

- SOXL/BITU는 금이 올라도 매수 OK
- TSLL은 금이 0.3% 이상이면 매수 금지
- **확인:** TSLL의 GLD 조건이 `<= +0.3%`이 맞는지? `>= +0.3%`이 아닌지?

---

### Q-6. BRKU 하락 진입 기준 여러 번 변경

> CSV에서 BRKU 진입 기준이 3번 다르게 나옴:
> - 21:56 → `-26%`
> - 22:10 정리 → `-30%`
> - 최종 정리 → `-32%`

- 현재 코드: `-32%` (최종 정리본 기준)
- **확인:** 최종값이 32%가 맞는지?

---

### Q-7. ETHU 추가매수 "10퍼센트 더 매수"

> CSV: `10퍼센트더 하락시 10퍼센트 더 매수를 한다`

- 다른 종목: 추가 하락시 "나머지 전액" 또는 "50%" 매수
- ETHU만 "10% 더" → **전체 자본의 10%인지, 기존 매수의 10%인지 모호**
- 현재 코드: `add_size: 0.1` (10%)
- **확인:** 전체 자본 대비 10%? 아니면 기존 포지션 대비 10%?

---

### Q-8. 섹터 로테이션 "금" 섹터 빠짐

> CSV: `비트코인 / 반도체 / 금 / 은행중`

- 4대 섹터: 비트코인, 반도체, 금, 은행
- 그런데 CSV에 **금이 1위일 때 어떤 종목을 매수하는지 언급이 없음**
  - BTC 1위 → SOXL
  - 반도체 1위 → ROBN
  - 은행 1위 → GDXU
  - 금 1위 → ???
- **확인:** 금이 1위 섹터일 때의 매수 규칙?

---

### Q-9. SK리츠 관련 조건 — 숫자 확인

> CSV에서 SK리츠 관련 조건이 여러 개:
> - `SK리츠가 1퍼센트 하락시 매수를 조심` (GDXU 매수시)
> - `SK리츠가 중간에 1.5퍼센트이상 하락시에는 롱포지션을 집중`
> - `평균적으로 1.0퍼센트 이상인 날에는 조심해서 매수 매도`

- "조심" / "집중" 같은 표현은 **알고리즘으로 구현하기 모호**
- **확인:** "조심" = 매수량 50% 감소? 매수 금지? "집중" = 매수량 200%?

---

### Q-10. SNXX, OKLL 종목 확인

- **SNXX**: 정확한 ETF명 / 기초자산 미확인
- **OKLL**: 정확한 ETF명 / 기초자산 미확인
- 두 종목 모두 주요 ETF DB에서 검색 어려움
- **확인:** 정확한 티커명과 기초자산

---

### Q-11. Polymarket "NASDAQ 상승 기대치" 데이터 매핑

> CSV: `POLYAMARKET : NASDAQ 51% 이상 상승`

- 현재 Polymarket 데이터: `btc_up`, `eth_up` 필드는 확인됨
- **`ndx_up` (나스닥 상승 확률) 필드가 실제 Polymarket에 있는지?**
- Polymarket에 "NASDAQ up or down" 마켓이 상시 운영되는지 확인 필요
- **확인:** Polymarket에서 NASDAQ 관련 어떤 마켓을 보는지?

---

## 7. 현재 엔진 파일 구조

```
strategies/taejun_attach_pattern/      (17 files, ~100KB)
├── base.py              # BaseStrategy, MarketData, Signal, Position
├── registry.py          # @register + get_strategy()
├── fees.py              # FeeCalculator (왕복 0.703%)
├── portfolio.py         # PortfolioManager (자금배분, 충돌해소)
├── params.py            # 11개 전략 파라미터
├── __init__.py          # 패키지 + 자동 등록
│
├── jab_soxl.py          # A. 잽모드 SOXL
├── jab_bitu.py          # B. 잽모드 BITU
├── jab_tsll.py          # C. 잽모드 TSLL
├── jab_seth.py          # D. 숏 잽모드 SETH
├── vix_gold.py          # E. VIX → GDXU
├── sp500_entry.py       # F. S&P500 편입
├── bargain_buy.py       # G. 저가매수
├── short_macro.py       # H. 숏포지션 전환
├── reit_risk.py         # I. 리츠 리스크
├── sector_rotate.py     # J. 섹터 로테이션
└── bank_conditional.py  # K. 조건부 은행주
```

---

## 8. 다음 단계

1. **태준님 확인 (Q-1 ~ Q-11)** → 모호한 지표 확정
2. **Critical 수정 (C-1 ~ C-3)** → 수수료 반영, 평균가 통일, entry_size
3. **Warning 수정** → 우선순위별 처리
4. **데이터 수집** → 누락 종목/크립토 스팟/VIX
5. **MarketData 로더 + 백테스트 러너** → 데이터 연결 후
