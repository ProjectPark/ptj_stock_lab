# ì‹œë®¬ë ˆì´ì…˜ â†’ ì‹¤ì „ ì „í™˜ ì„¤ê³„ì„œ

> ì‘ì„±ì¼: 2026-02-24
> ìƒíƒœ: Draft
> ëŒ€ìƒ: ptj_stock_lab (ì‹œë®¬ë ˆì´ì…˜) â†’ ptj_stock (í”„ë¡œë•ì…˜)

---

## 1. í˜„í™© ì§„ë‹¨

### 1.1 í˜„ì¬ ë‘ ì‹œìŠ¤í…œì˜ ì—­í• 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     ë³µì‚¬/ìˆ˜ë™ ë™ê¸°í™”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ptj_stock_lab           â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚     ptj_stock               â”‚
â”‚                             â”‚                          â”‚                             â”‚
â”‚  ì—°êµ¬/ë°±í…ŒìŠ¤íŠ¸/ìµœì í™”       â”‚   signals_v5.py ê¸°ë°˜     â”‚  ì‹¤ì‹œê°„ íŠ¸ë ˆì´ë”©             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   íŒŒë¼ë¯¸í„° ìˆ˜ë™ ì´ì‹     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 4-Line ì „ëµ í”„ë ˆì„  â”‚   â”‚                          â”‚  â”‚ signals.py (v6)     â”‚    â”‚
â”‚  â”‚ Backtest v2~v5      â”‚   â”‚                          â”‚  â”‚ auto_trader.py      â”‚    â”‚
â”‚  â”‚ Optuna ìµœì í™”       â”‚   â”‚                          â”‚  â”‚ KIS WebSocket       â”‚    â”‚
â”‚  â”‚ 145MB 1ë¶„ë´‰ ë°ì´í„°  â”‚   â”‚                          â”‚  â”‚ Docker 6-container  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 í•µì‹¬ ê°­ ë¶„ì„

| ì˜ì—­ | ì‹œë®¬ë ˆì´ì…˜ (lab) | í”„ë¡œë•ì…˜ (ptj_stock) | ê°­ ì‹¬ê°ë„ |
|------|-----------------|---------------------|----------|
| **ì‹œê·¸ë„ ì—”ì§„** | v5 (Line A) + CompositeEngine (Line B) | v6 (v5 í™•ì¥ + DI Surge/Ensemble) | ğŸŸ¡ ì¤‘ â€” ìˆ˜ë™ ë™ê¸°í™”, ë²„ì „ ë¶ˆì¼ì¹˜ ë°œìƒ ê°€ëŠ¥ |
| **íŒŒë¼ë¯¸í„°** | Frozen dataclass ê³„ì¸µ (BaseParamsâ†’V5Params) | Pydantic Settings (flat dict) | ğŸ”´ ë†’ìŒ â€” êµ¬ì¡° ì™„ì „ ë¶ˆì¼ì¹˜, ìˆ˜ë™ ì´ì‹ |
| **ë°ì´í„° ì…ë ¥** | parquet 1ë¶„ë´‰ (ê³¼ê±° 3ë…„) | KIS WebSocket ì‹¤ì‹œê°„ + REST fallback | ğŸŸ¡ ì¤‘ â€” ì…ë ¥ í˜•ì‹ ë™ì¼í•˜ì§€ ì•ŠìŒ |
| **ì£¼ë¬¸ ì‹¤í–‰** | ê°€ìƒ ì²´ê²° (bar OHLC ê¸°ì¤€) | KIS API ì‹¤ ì£¼ë¬¸ (LIMIT/MARKET) | ğŸ”´ ë†’ìŒ â€” ìŠ¬ë¦¬í”¼ì§€, ì²´ê²° ì§€ì—° ë¯¸ë°˜ì˜ |
| **ìˆ˜ìˆ˜ë£Œ** | ì •ì  ëª¨ë¸ (ì™•ë³µ 0.703%) | ë™ì¼ ëª¨ë¸ ì ìš© ì¤‘ | ğŸŸ¢ ë‚®ìŒ |
| **ë¦¬ìŠ¤í¬ ê´€ë¦¬** | CB, íš¡ë³´ê°ì§€, ì†ì ˆ (ì‹œë®¬ë ˆì´ì…˜ìš©) | ì£¼ë¬¸ ê²€ì¦ 4ë‹¨ê³„ + ì¿¨ë‹¤ìš´ ì‹œìŠ¤í…œ | ğŸŸ¡ ì¤‘ â€” í”„ë¡œë•ì…˜ ì•ˆì „ì¥ì¹˜ ë³„ë„ êµ¬í˜„ |
| **í¬ì§€ì…˜ ì¶”ì ** | ë©”ëª¨ë¦¬ dict (backtest_v5.py) | DB + Redis (but KIS ì”ê³ ì™€ ë¯¸ë™ê¸°í™”) | ğŸ”´ ë†’ìŒ â€” ì‹¤ ì”ê³  ë¶ˆì¼ì¹˜ ìœ„í—˜ |
| **ëª¨ë‹ˆí„°ë§** | ì—†ìŒ (ë¡œì»¬ print) | container logsë§Œ ì¡´ì¬ | ğŸ”´ ë†’ìŒ â€” APM/ì•Œë¦¼ ì—†ìŒ |
| **ë°°í¬** | ë¡œì»¬ ì‹¤í–‰ | Docker Compose (iMac) | ğŸŸ¡ ì¤‘ â€” ìë™ ë°°í¬ íŒŒì´í”„ë¼ì¸ ë¯¸êµ¬ì¶• |

---

## 2. ëª©í‘œ ì•„í‚¤í…ì²˜

### 2.1 ì„¤ê³„ ì›ì¹™

1. **Single Source of Truth**: ì‹œê·¸ë„ ì—”ì§„ì€ í•˜ë‚˜ì˜ ì½”ë“œë² ì´ìŠ¤ì—ì„œ ê´€ë¦¬
2. **Configuration as Code**: íŒŒë¼ë¯¸í„°ëŠ” ë²„ì „ ê´€ë¦¬ë˜ëŠ” íŒŒì¼ì—ì„œ ê´€ë¦¬, ëŸ°íƒ€ì„ ì£¼ì…
3. **Simulation Parity**: ì‹œë®¬ë ˆì´ì…˜ê³¼ í”„ë¡œë•ì…˜ì´ ë™ì¼í•œ ì‹œê·¸ë„ ë¡œì§ ì‹¤í–‰
4. **Defense in Depth**: ì‹œê·¸ë„ â†’ ì£¼ë¬¸ ê²€ì¦ â†’ ì²´ê²° â†’ ì‚¬í›„ ê°ì‹œ, ê° ë‹¨ê³„ì— ì•ˆì „ì¥ì¹˜
5. **Observable by Default**: ëª¨ë“  ê²°ì •(ì‹œê·¸ë„, ì£¼ë¬¸, ì²´ê²°)ì— ì¶”ì  ê°€ëŠ¥í•œ ë¡œê·¸

### 2.2 ëª©í‘œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ê³µìœ  ì‹œê·¸ë„ íŒ¨í‚¤ì§€                                  â”‚
â”‚                     ptj_signals/ (ë…ë¦½ íŒ¨í‚¤ì§€)                              â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Line A      â”‚  â”‚  Line B      â”‚  â”‚  Line C      â”‚  â”‚  Line D      â”‚   â”‚
â”‚  â”‚  v5 signals  â”‚  â”‚  Composite   â”‚  â”‚  D2S Engine  â”‚  â”‚  JUN Trade   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  params.py               â”‚  â”‚  signal_protocol.py                  â”‚    â”‚
â”‚  â”‚  (Frozen dataclass ê³„ì¸µ) â”‚  â”‚  (ê³µí†µ ì…ì¶œë ¥ ì¸í„°í˜ì´ìŠ¤)            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ptj_stock_lab           â”‚  â”‚  ptj_stock                       â”‚
â”‚  (ì‹œë®¬ë ˆì´ì…˜ ì†Œë¹„ì)     â”‚  â”‚  (í”„ë¡œë•ì…˜ ì†Œë¹„ì)               â”‚
â”‚                          â”‚  â”‚                                  â”‚
â”‚  backtest_v5.py          â”‚  â”‚  auto_trader.py                  â”‚
â”‚  optimizer_v5.py         â”‚  â”‚  order_service.py                â”‚
â”‚  pipeline.py             â”‚  â”‚  price_service.py                â”‚
â”‚                          â”‚  â”‚                                  â”‚
â”‚  import ptj_signals      â”‚  â”‚  import ptj_signals              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ì»´í¬ë„ŒíŠ¸ë³„ ìƒì„¸ ì„¤ê³„

### 3.1 ê³µìœ  ì‹œê·¸ë„ íŒ¨í‚¤ì§€ (`ptj_signals/`)

í˜„ì¬ ì‹œê·¸ë„ ì½”ë“œê°€ ë‘ ë ˆí¬ì— ê°ê° ì¡´ì¬í•˜ê³  ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•˜ëŠ” êµ¬ì¡°ê°€ ê°€ì¥ í° ë¬¸ì œ. ì´ë¥¼ ë‹¨ì¼ íŒ¨í‚¤ì§€ë¡œ ë¶„ë¦¬.

#### íŒ¨í‚¤ì§€ êµ¬ì¡°

```
ptj_signals/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ protocol.py              # ê³µí†µ ì¸í„°í˜ì´ìŠ¤ ì •ì˜
â”œâ”€â”€ params/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base.py              # BaseParams (frozen dataclass)
â”‚   â”œâ”€â”€ v5.py                # V5Params
â”‚   â””â”€â”€ fee.py               # FeeConfig
â”œâ”€â”€ engines/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ line_a/
â”‚   â”‚   â””â”€â”€ signals_v5.py    # í˜„ì¬ labì˜ signals_v5.py
â”‚   â”œâ”€â”€ line_b/
â”‚   â”‚   â””â”€â”€ composite.py     # CompositeSignalEngine
â”‚   â”œâ”€â”€ line_c/
â”‚   â”‚   â””â”€â”€ d2s.py           # D2S Engine
â”‚   â””â”€â”€ line_d/
â”‚       â””â”€â”€ jun_trade.py     # JUN Trade
â”œâ”€â”€ filters/
â”‚   â”œâ”€â”€ circuit_breaker.py
â”‚   â”œâ”€â”€ sideways.py
â”‚   â”œâ”€â”€ gold.py
â”‚   â””â”€â”€ stop_loss.py
â”œâ”€â”€ indicators/
â”‚   â”œâ”€â”€ technical.py         # RSI, MACD, BB, ATR
â”‚   â””â”€â”€ market_mode.py       # Polymarket ê¸°ë°˜ ì‹œí™© íŒë‹¨
â””â”€â”€ types.py                 # MarketData, SignalResult, Position ë“±
```

#### í•µì‹¬ ì¸í„°í˜ì´ìŠ¤

```python
# protocol.py
from dataclasses import dataclass
from typing import Protocol
from datetime import datetime

@dataclass(frozen=True)
class MarketSnapshot:
    """ì‹œë®¬ë ˆì´ì…˜ê³¼ í”„ë¡œë•ì…˜ ëª¨ë‘ ë™ì¼í•œ ì…ë ¥ í˜•ì‹"""
    timestamp: datetime
    prices: dict[str, float]           # {ticker: current_price}
    changes: dict[str, float]          # {ticker: change_pct}
    poly: dict[str, float]             # {btc_up, ndx_up, eth_up}
    volumes: dict[str, float]          # {ticker: volume}
    ohlcv: dict[str, pd.DataFrame]     # {ticker: OHLCV DataFrame}


@dataclass
class SignalAction:
    """ì‹œê·¸ë„ ì—”ì§„ì´ ì¶œë ¥í•˜ëŠ” ë§¤ë§¤ ì§€ì‹œ"""
    signal_type: str                   # "twin_pair", "conditional", "stop_loss", ...
    action: str                        # "BUY", "SELL", "HOLD"
    ticker: str
    reason: str                        # ì‚¬ëŒì´ ì½ì„ ìˆ˜ ìˆëŠ” ê·¼ê±°
    confidence: float                  # 0.0 ~ 1.0 (ì‹œê·¸ë„ í™•ì‹ ë„)
    metadata: dict                     # ë¶€ê°€ ì •ë³´ (gap_pct, trigger_values, ...)


class SignalEngine(Protocol):
    """ëª¨ë“  ì‹œê·¸ë„ ì—”ì§„ì´ êµ¬í˜„í•´ì•¼ í•˜ëŠ” í”„ë¡œí† ì½œ"""

    def evaluate(self, snapshot: MarketSnapshot) -> list[SignalAction]:
        """ì‹œì¥ ìŠ¤ëƒ…ìƒ·ì„ ë°›ì•„ ë§¤ë§¤ ì§€ì‹œ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜"""
        ...

    def reset_daily_state(self) -> None:
        """ì¼ë³„ ìƒíƒœ ì´ˆê¸°í™” (ë°ì¼ë¦¬ íŠ¸ë ˆì´ë“œ ì¹´ìš´í„° ë“±)"""
        ...
```

#### ì†Œë¹„ ë°©ì‹

**ì‹œë®¬ë ˆì´ì…˜ (lab)**:
```python
# backtest_v5.py
from ptj_signals.engines.line_a.signals_v5 import LineAEngineV5
from ptj_signals.params.v5 import V5Params, v5_params_from_config

engine = LineAEngineV5(params=v5_params_from_config())

for bar in day_bars:
    snapshot = MarketSnapshot(timestamp=bar.ts, prices=bar.prices, ...)
    actions = engine.evaluate(snapshot)
    for action in actions:
        simulate_execution(action)
```

**í”„ë¡œë•ì…˜ (ptj_stock)**:
```python
# auto_trader.py
from ptj_signals.engines.line_a.signals_v5 import LineAEngineV5
from ptj_signals.params.v5 import V5Params

engine = LineAEngineV5(params=V5Params(**settings.signal_params))

# 1ì´ˆ ë£¨í”„
latest = await redis.get("ptj:latest")
snapshot = MarketSnapshot.from_redis(latest)
actions = engine.evaluate(snapshot)
for action in actions:
    await order_service.execute(action)    # ì‹¤ ì£¼ë¬¸
```

**ë™ì¼í•œ ì—”ì§„, ë™ì¼í•œ ì…ë ¥ í˜•ì‹ â†’ ì‹œë®¬ë ˆì´ì…˜ = í”„ë¡œë•ì…˜ ë³´ì¥**

---

### 3.2 íŒŒë¼ë¯¸í„° ê´€ë¦¬ ì²´ê³„

#### í˜„ì¬ ë¬¸ì œ

```
config.py (lab)                          config.py (ptj_stock)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ V5_PAIR_GAP = 2.2    â”‚  ìˆ˜ë™ ë³µì‚¬ â†’    â”‚ pair_gap_threshold = 1.5 â”‚  â† ë‹¤ë¥¸ ê°’!
â”‚ V5_DCA_MAX = 4       â”‚                 â”‚ (V1 í”„ë¦¬ì…‹ ê¸°ë³¸ê°’)       â”‚
â”‚ STOP_LOSS = -3.0     â”‚                 â”‚ stop_loss_pct = -3.0     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ëª©í‘œ: íŒŒë¼ë¯¸í„° íŒŒì¼ ê¸°ë°˜ ê´€ë¦¬

```
ptj_signals/params/
â”œâ”€â”€ presets/
â”‚   â”œâ”€â”€ v5_baseline.json         # Optuna ì´ì „ ê¸°ë³¸ê°’
â”‚   â”œâ”€â”€ v5_optuna_best.json      # Optuna ìµœì í™” ê²°ê³¼
â”‚   â””â”€â”€ v5_production.json       # í”„ë¡œë•ì…˜ ì‹¤ ì ìš© ê°’ (ìˆ˜ë™ í™•ì •)
â””â”€â”€ schema.py                    # JSON Schema ê²€ì¦
```

```json
// v5_production.json
{
  "version": "v5",
  "updated_at": "2026-02-24",
  "updated_by": "optuna_v5_study_2026-02-20",
  "params": {
    "capital_usd": 15000,
    "initial_buy_usd": 2250,
    "pair_gap_entry_threshold": 2.2,
    "pair_gap_sell_threshold": 0.9,
    "dca_max_count": 4,
    "dca_drop_pct": -1.35,
    "coin_trigger_pct": 4.5,
    "stop_loss_pct": -3.0,
    "stop_loss_bullish_pct": -8.0,
    "entry_cutoff_hour": 10,
    "sideways_min_signals": 3,
    "cb_vix_spike_pct": 15.0,
    "cb_gld_spike_pct": 3.0,
    "cb_btc_crash_pct": -5.0
  }
}
```

#### í”„ë¡œëª¨ì…˜ ì›Œí¬í”Œë¡œìš°

```
[Optuna ìµœì í™”]
      â”‚
      â–¼
  v5_optuna_best.json (ìë™ ìƒì„±)
      â”‚
      â”‚  ì‚¬ëŒì´ ê²€í†  + í™•ì •
      â–¼
  v5_production.json (git commit)
      â”‚
      â”œâ”€â”€â”€ lab: backtest ê²€ì¦ ì¬ì‹¤í–‰
      â”‚         â””â”€â”€ í†µê³¼ â†’ í™•ì •
      â”‚
      â””â”€â”€â”€ ptj_stock: íŒŒë¼ë¯¸í„° ë¡œë”©
                â””â”€â”€ docker restart
```

---

### 3.3 ë°ì´í„° íŒŒì´í”„ë¼ì¸

#### í˜„ì¬ ë°ì´í„° íë¦„

```
[ì‹œë®¬ë ˆì´ì…˜]                         [í”„ë¡œë•ì…˜]
yfinance â†’ parquet 1ë¶„ë´‰             KIS WebSocket â†’ Redis snapshot
(ì •ì , 3ë…„ë¶„)                        (ì‹¤ì‹œê°„, 1ì´ˆ ê°„ê²©)

  â†“ í˜•ì‹ ë¶ˆì¼ì¹˜                        â†“
  df[['timestamp','symbol',           {"BITU": {"price": 245.3,
      'open','high','low',                     "change_pct": 2.15}}
      'close','volume']]
```

#### ëª©í‘œ: ê³µí†µ ì–´ëŒ‘í„° ë ˆì´ì–´

```python
# ptj_signals/adapters/
class BacktestAdapter:
    """parquet 1ë¶„ë´‰ â†’ MarketSnapshot ë³€í™˜"""
    def __init__(self, parquet_path: str, poly_dir: str):
        self.df = pd.read_parquet(parquet_path)
        self.poly = load_polymarket(poly_dir)

    def iter_bars(self, start_date, end_date) -> Iterator[MarketSnapshot]:
        for ts, group in self.df.groupby('timestamp'):
            yield MarketSnapshot(
                timestamp=ts,
                prices={row.symbol: row.close for row in group.itertuples()},
                changes=self._calc_changes(group),
                poly=self._get_poly(ts.date()),
                ...
            )


class LiveAdapter:
    """Redis snapshot â†’ MarketSnapshot ë³€í™˜"""
    def __init__(self, redis_pool):
        self.redis = redis_pool

    async def get_snapshot(self) -> MarketSnapshot:
        raw = await self.redis.get("ptj:latest")
        data = json.loads(raw)
        return MarketSnapshot(
            timestamp=datetime.now(),
            prices={k: v["price"] for k, v in data["tickers"].items()},
            changes={k: v["change_pct"] for k, v in data["tickers"].items()},
            poly=data.get("poly", {}),
            ...
        )
```

---

### 3.4 ì£¼ë¬¸ ì‹¤í–‰ ë ˆì´ì–´

ì‹œë®¬ë ˆì´ì…˜ì—ì„œ ê°€ì¥ í° ê´´ë¦¬ê°€ ë°œìƒí•˜ëŠ” ì§€ì . ì‹¤ì „ì—ì„œëŠ” ì•„ë˜ê°€ ì¶”ê°€ë¡œ í•„ìš”.

#### 3.4.1 ìŠ¬ë¦¬í”¼ì§€ ëª¨ë¸

```python
@dataclass(frozen=True)
class ExecutionModel:
    """ì£¼ë¬¸ ì²´ê²° ì‹œë®¬ë ˆì´ì…˜ ëª¨ë¸"""
    # ì‹œì¥ê°€ ìŠ¬ë¦¬í”¼ì§€ (%)
    market_slippage_pct: float = 0.05       # 0.05% ê¸°ë³¸
    # ì§€ì •ê°€ ì²´ê²° í™•ë¥  (1.0 = 100% ì²´ê²° ê°€ì •)
    limit_fill_probability: float = 0.85
    # ì²´ê²° ì§€ì—° (ì´ˆ)
    execution_delay_sec: float = 1.0
    # ìµœì†Œ í˜¸ê°€ ë‹¨ìœ„ ($)
    tick_size: float = 0.01

    def apply_slippage(self, price: float, side: str) -> float:
        """ë§¤ìˆ˜: +ìŠ¬ë¦¬í”¼ì§€, ë§¤ë„: -ìŠ¬ë¦¬í”¼ì§€"""
        if side == "BUY":
            return price * (1 + self.market_slippage_pct / 100)
        return price * (1 - self.market_slippage_pct / 100)
```

**ì‹œë®¬ë ˆì´ì…˜ ì ìš©**: ë°±í…ŒìŠ¤íŠ¸ì—ì„œ ìŠ¬ë¦¬í”¼ì§€ë¥¼ ë°˜ì˜í•˜ë©´ ì‹¤ì „ ìˆ˜ìµë¥ ì— ë” ê°€ê¹Œìš´ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŒ. í˜„ì¬ ë°±í…ŒìŠ¤íŠ¸ëŠ” bar close ê°€ê²©ì— ì¦‰ì‹œ ì²´ê²°ì„ ê°€ì •í•˜ê³  ìˆì–´ ë‚™ê´€ì  í¸í–¥ ì¡´ì¬.

#### 3.4.2 ì£¼ë¬¸ ì‹¤í–‰ í”„ë¡œí† ì½œ

```python
class OrderExecutor(Protocol):
    """ì‹œë®¬ë ˆì´ì…˜/í”„ë¡œë•ì…˜ ê³µí†µ ì£¼ë¬¸ ì‹¤í–‰ ì¸í„°í˜ì´ìŠ¤"""

    async def execute(self, action: SignalAction) -> OrderResult:
        ...

    async def cancel(self, order_id: str) -> bool:
        ...

    async def get_positions(self) -> dict[str, Position]:
        ...


# ì‹œë®¬ë ˆì´ì…˜ìš©
class SimulatedExecutor:
    def __init__(self, capital: float, fee_config: FeeConfig,
                 execution_model: ExecutionModel):
        self.cash = capital
        self.positions = {}

    async def execute(self, action: SignalAction) -> OrderResult:
        price = self.execution_model.apply_slippage(
            action.metadata["price"], action.action
        )
        fee = self.fee_config.calc_fee(price * qty, action.action)
        # ... ê°€ìƒ ì²´ê²° ì²˜ë¦¬


# í”„ë¡œë•ì…˜ìš©
class KISExecutor:
    def __init__(self, kis_client, fee_config: FeeConfig):
        self.kis = kis_client

    async def execute(self, action: SignalAction) -> OrderResult:
        # ì‹¤ KIS API í˜¸ì¶œ
        result = await self.kis.place_order(
            symbol=action.ticker,
            side=action.action,
            order_type="LIMIT",
            price=action.metadata["price"],
        )
        return OrderResult(...)
```

---

### 3.5 ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì²´ê³„

#### 3.5.1 í˜„ì¬ ì•ˆì „ì¥ì¹˜ ëª©ë¡

| ë ˆì´ì–´ | ì‹œë®¬ë ˆì´ì…˜ (lab) | í”„ë¡œë•ì…˜ (ptj_stock) | í•„ìš” ë³´ê°• |
|--------|-----------------|---------------------|----------|
| **ì‹œê·¸ë„ ë ˆë²¨** | íš¡ë³´ê°ì§€, CB 6ë‹¨ê³„, Gold ì°¨ë‹¨ | Gold ì°¨ë‹¨, ì¤‘ë³µ ì£¼ë¬¸ ë°©ì§€ | í”„ë¡œë•ì…˜ì— CB/íš¡ë³´ê°ì§€ ì´ì‹ |
| **ì£¼ë¬¸ ë ˆë²¨** | ì—†ìŒ (ê°€ìƒ) | ê¸ˆì•¡ í•œë„ â‚©270ë§Œ, ì„¸ì…˜ ì²´í¬ | ì¼ì¼ ì†ì‹¤ í•œë„ ì¶”ê°€ |
| **í¬ì§€ì…˜ ë ˆë²¨** | DCA ìµœëŒ€ 4íšŒ, 1ì¼ 1ì¢…ëª© ì œí•œ | ì—†ìŒ | í¬ì§€ì…˜ í¬ê¸° ì œí•œ ì´ì‹ |
| **ì‹œìŠ¤í…œ ë ˆë²¨** | ì—†ìŒ | 3ë‹¨ê³„ ê²Œì´íŒ…, ì¿¨ë‹¤ìš´ | Kill switch ì¶”ê°€ |

#### 3.5.2 ì¶”ê°€ í•„ìš” ì•ˆì „ì¥ì¹˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        RISK MANAGEMENT STACK                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Layer 1: Signal Guard (ì‹œê·¸ë„ ì „ í•„í„°)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â€¢ Circuit Breaker: VIX ìŠ¤íŒŒì´í¬, GLD ê¸‰ë“±, BTC ê¸‰ë½       â”‚  â”‚
â”‚  â”‚ â€¢ íš¡ë³´ì¥ ê°ì§€: 5ê°œ ì§€í‘œ ì¤‘ Nê°œ ì´ìƒ â†’ ë§¤ìˆ˜ ì°¨ë‹¨           â”‚  â”‚
â”‚  â”‚ â€¢ Gold í•„í„°: GLD ì–‘ì „ â†’ ì‹ ê·œ ë§¤ìˆ˜ ì°¨ë‹¨                    â”‚  â”‚
â”‚  â”‚ â€¢ ì‹œê°„ í•„í„°: 10:00 ET ì´í›„ ì‹ ê·œ ì§„ì… ì°¨ë‹¨                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â†“                                      â”‚
â”‚  Layer 2: Order Guard (ì£¼ë¬¸ ì „ ê²€ì¦)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â€¢ ë‹¨ì¼ ì£¼ë¬¸ ê¸ˆì•¡ í•œë„: $2,000 (â‚©270ë§Œ)                    â”‚  â”‚
â”‚  â”‚ â€¢ ì¼ì¼ ì´ ë§¤ìˆ˜ í•œë„: $10,000                              â”‚  â”‚
â”‚  â”‚ â€¢ ì¼ì¼ ì†ì‹¤ í•œë„: -$500 ë„ë‹¬ ì‹œ ë‹¹ì¼ ë§¤ìˆ˜ ì¤‘ë‹¨  â˜…ì‹ ê·œ     â”‚  â”‚
â”‚  â”‚ â€¢ ë™ì¼ ì¢…ëª© ì—°ì† ì£¼ë¬¸ ê°„ê²©: 20ë¶„                          â”‚  â”‚
â”‚  â”‚ â€¢ DCA ìµœëŒ€ íšŸìˆ˜: 4íšŒ (ì´ˆê³¼ ë§¤ìˆ˜ ì°¨ë‹¨)                     â”‚  â”‚
â”‚  â”‚ â€¢ ì„¸ì…˜ ì²´í¬: ì¥ ì™¸ ì‹œê°„ ì£¼ë¬¸ ì°¨ë‹¨                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â†“                                      â”‚
â”‚  Layer 3: Position Guard (í¬ì§€ì…˜ ê´€ë¦¬)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â€¢ ìµœëŒ€ ë™ì‹œ í¬ì§€ì…˜: 5ì¢…ëª©  â˜…ì‹ ê·œ                          â”‚  â”‚
â”‚  â”‚ â€¢ ë‹¨ì¼ ì¢…ëª© ìµœëŒ€ ë¹„ì¤‘: 40%  â˜…ì‹ ê·œ                         â”‚  â”‚
â”‚  â”‚ â€¢ ì†ì ˆ: Normal -3% / Bullish -8%                          â”‚  â”‚
â”‚  â”‚ â€¢ í¬ì§€ì…˜ KIS ì”ê³  ì •í•©ì„± ì²´í¬ (5ë¶„ ê°„ê²©)  â˜…ì‹ ê·œ           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â†“                                      â”‚
â”‚  Layer 4: Kill Switch (ë¹„ìƒ ì •ì§€)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â€¢ API ì‹¤í–‰ ëª¨ë“œ í† ê¸€: auto â†’ manual (ì¦‰ì‹œ ì¤‘ë‹¨)           â”‚  â”‚
â”‚  â”‚ â€¢ ì¼ì¼ ì´ ì†ì‹¤ $1,000 ì´ˆê³¼ ì‹œ ìë™ ì¤‘ë‹¨  â˜…ì‹ ê·œ            â”‚  â”‚
â”‚  â”‚ â€¢ KIS API ì—°ì† ì‹¤íŒ¨ 3íšŒ â†’ ìë™ ì¼ì‹œì •ì§€ + ì•Œë¦¼  â˜…ì‹ ê·œ     â”‚  â”‚
â”‚  â”‚ â€¢ ìˆ˜ë™ ì „ëŸ‰ ì²­ì‚° ë²„íŠ¼ (UI)  â˜…ì‹ ê·œ                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.6 í¬ì§€ì…˜ ë™ê¸°í™”

í˜„ì¬ ê°€ì¥ ì·¨ì•½í•œ ë¶€ë¶„. í”„ë¡œë•ì…˜ì—ì„œ í¬ì§€ì…˜ì„ ìì²´ DBë¡œë§Œ ì¶”ì í•˜ê³  ìˆì–´ KIS ì‹¤ì”ê³ ì™€ ë¶ˆì¼ì¹˜ ê°€ëŠ¥.

#### ëª©í‘œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  KIS ì‹¤ì”ê³            â”‚  â† Source of Truth
â”‚  (inquire-balance)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ 5ë¶„ ì£¼ê¸° ë™ê¸°í™”
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Position Manager                             â”‚
â”‚                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  KIS ì”ê³        â”‚  â”‚  ë‚´ë¶€ ì¶”ì        â”‚   â”‚
â”‚  â”‚  (ì‹¤ ë³´ìœ )      â”‚â†â†’â”‚  (ì£¼ë¬¸ ì´ë ¥ ê¸°ë°˜)â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚          â”‚                     â”‚              â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                    â–¼                          â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚          â”‚  ë¶ˆì¼ì¹˜ ê°ì§€     â”‚                  â”‚
â”‚          â”‚  (reconcile)    â”‚                  â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                   â”‚                           â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚          â–¼                 â–¼                  â”‚
â”‚    ë¶ˆì¼ì¹˜ ì—†ìŒ          ë¶ˆì¼ì¹˜ ë°œìƒ            â”‚
â”‚    (ì •ìƒ)              â†’ ì•Œë¦¼ + ë¡œê·¸          â”‚
â”‚                        â†’ ë‚´ë¶€ ìƒíƒœ ë³´ì •       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```python
class PositionManager:
    """KIS ì‹¤ì”ê³ ì™€ ë‚´ë¶€ ì¶”ì ì˜ ì •í•©ì„± ê´€ë¦¬"""

    async def reconcile(self) -> list[Discrepancy]:
        """5ë¶„ ì£¼ê¸° ì •í•©ì„± ì²´í¬"""
        kis_positions = await self.kis.get_balance()
        internal_positions = self.db.get_open_positions()

        discrepancies = []
        for ticker in set(kis_positions) | set(internal_positions):
            kis_qty = kis_positions.get(ticker, {}).get("qty", 0)
            int_qty = internal_positions.get(ticker, {}).get("qty", 0)
            if abs(kis_qty - int_qty) > 0:
                discrepancies.append(Discrepancy(
                    ticker=ticker,
                    kis_qty=kis_qty,
                    internal_qty=int_qty,
                    delta=kis_qty - int_qty,
                ))
        return discrepancies
```

---

### 3.7 ëª¨ë‹ˆí„°ë§ & ì•Œë¦¼

#### í˜„ì¬ ìƒíƒœ
- ì‹œë®¬ë ˆì´ì…˜: `print()` ë¡œì»¬ ì¶œë ¥, ê²°ê³¼ JSON ì €ì¥
- í”„ë¡œë•ì…˜: Docker container ë¡œê·¸, health check ì—”ë“œí¬ì¸íŠ¸ë§Œ ì¡´ì¬

#### ëª©í‘œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MONITORING STACK                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  [ë©”íŠ¸ë¦­ ìˆ˜ì§‘]                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ ì‹œê·¸ë„ ë°œìƒ íšŸìˆ˜ (íƒ€ì…ë³„, ì¢…ëª©ë³„)                        â”‚   â”‚
â”‚  â”‚ â€¢ ì£¼ë¬¸ ì„±ê³µ/ì‹¤íŒ¨ íšŸìˆ˜                                      â”‚   â”‚
â”‚  â”‚ â€¢ ì²´ê²° ì§€ì—° ì‹œê°„ (ì£¼ë¬¸â†’ì²´ê²°)                               â”‚   â”‚
â”‚  â”‚ â€¢ ì¼ì¼ PnL (ì‹¤í˜„ + ë¯¸ì‹¤í˜„)                                 â”‚   â”‚
â”‚  â”‚ â€¢ í¬ì§€ì…˜ í¬ê¸° (ì¢…ëª©ë³„)                                     â”‚   â”‚
â”‚  â”‚ â€¢ KIS API ì‘ë‹µ ì‹œê°„                                        â”‚   â”‚
â”‚  â”‚ â€¢ WebSocket ì—°ê²° ìƒíƒœ                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                    â”‚
â”‚  [ì•Œë¦¼ íŠ¸ë¦¬ê±°]                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ”´ Critical:                                               â”‚   â”‚
â”‚  â”‚   â€¢ ì†ì ˆ ë°œë™ (-3% / -8%)                                  â”‚   â”‚
â”‚  â”‚   â€¢ KIS API ì—°ê²° ëŠê¹€ (3ë¶„ ì´ìƒ)                           â”‚   â”‚
â”‚  â”‚   â€¢ í¬ì§€ì…˜-ì”ê³  ë¶ˆì¼ì¹˜ ê°ì§€                                â”‚   â”‚
â”‚  â”‚   â€¢ Kill switch ë°œë™                                       â”‚   â”‚
â”‚  â”‚                                                            â”‚   â”‚
â”‚  â”‚ ğŸŸ¡ Warning:                                                â”‚   â”‚
â”‚  â”‚   â€¢ Circuit Breaker í™œì„±í™”                                 â”‚   â”‚
â”‚  â”‚   â€¢ ì¼ì¼ ì†ì‹¤ -$300 ì´ˆê³¼                                   â”‚   â”‚
â”‚  â”‚   â€¢ ì£¼ë¬¸ ì—°ì† ì‹¤íŒ¨ (2íšŒ)                                   â”‚   â”‚
â”‚  â”‚   â€¢ íš¡ë³´ì¥ ê°ì§€ ì§„ì…                                       â”‚   â”‚
â”‚  â”‚                                                            â”‚   â”‚
â”‚  â”‚ ğŸŸ¢ Info:                                                   â”‚   â”‚
â”‚  â”‚   â€¢ ë§¤ìˆ˜/ë§¤ë„ ì²´ê²°                                         â”‚   â”‚
â”‚  â”‚   â€¢ ì¥ ì‹œì‘/ë§ˆê°                                           â”‚   â”‚
â”‚  â”‚   â€¢ ì‹œì¥ ëª¨ë“œ ì „í™˜ (BULLISHâ†’NORMAL ë“±)                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                    â”‚
â”‚  [ì•Œë¦¼ ì±„ë„]                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ í…”ë ˆê·¸ë¨ ë´‡ (Critical + Warning)                         â”‚   â”‚
â”‚  â”‚ â€¢ í”„ë¡ íŠ¸ì—”ë“œ í† ìŠ¤íŠ¸ (ì „ì²´)                                 â”‚   â”‚
â”‚  â”‚ â€¢ PostgreSQL signal_events í…Œì´ë¸” (ì „ì²´ ì´ë ¥)              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.8 ì¼ì¼ ìš´ì˜ ì‚¬ì´í´

```
06:00 KST  â”€â”€â”€ ì‹œìŠ¤í…œ ìë™ ê¸°ë™ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              â”‚
              â”œâ”€â”€ KIS í† í° ê°±ì‹ 
              â”œâ”€â”€ Polymarket í™•ë¥  fetch
              â”œâ”€â”€ ì‹œì¥ ëª¨ë“œ ê²°ì • (BULLISH/NORMAL/BEARISH)
              â””â”€â”€ ì „ì¼ ìºë¦¬ í¬ì§€ì…˜ ë¡œë”©

22:30 KST  â”€â”€â”€ ì¥ ì‹œì‘ (ET 09:30) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              â”‚
              â”œâ”€â”€ WebSocket ì—°ê²° + ì‹¤ì‹œê°„ ì‹œì„¸ ì‹œì‘
              â”œâ”€â”€ ì‹œê·¸ë„ ì—”ì§„ ê°€ë™
              â”‚     â”œâ”€â”€ Gold ì²´í¬ â†’ ë§¤ìˆ˜ ì°¨ë‹¨ ì—¬ë¶€
              â”‚     â”œâ”€â”€ Twin Pair ê°­ ê³„ì‚°
              â”‚     â”œâ”€â”€ Conditional íŠ¸ë¦¬ê±° ëª¨ë‹ˆí„°ë§
              â”‚     â””â”€â”€ CB/íš¡ë³´ í•„í„°
              â”‚
              â”œâ”€â”€ ìë™ë§¤ë§¤ ë£¨í”„ (3ì´ˆ ê°„ê²©)
              â”‚     â”œâ”€â”€ Signal Guard â†’ Order Guard â†’ ì£¼ë¬¸ ì‹¤í–‰
              â”‚     â””â”€â”€ ì²´ê²° í™•ì¸ + í¬ì§€ì…˜ ì—…ë°ì´íŠ¸
              â”‚
              â””â”€â”€ 5ë¶„ ì£¼ê¸°: KIS ì”ê³  ì •í•©ì„± ì²´í¬

23:30 KST  â”€â”€â”€ Entry Cutoff (ET 10:00) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              â”‚
              â””â”€â”€ ì‹ ê·œ ì§„ì… ì°¨ë‹¨ (ê¸°ì¡´ í¬ì§€ì…˜ ê´€ë¦¬ë§Œ)

05:00 KST  â”€â”€â”€ ì¥ ë§ˆê° (ET 16:00) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              â”‚
              â”œâ”€â”€ Bullish ëª¨ë“œ: ìºë¦¬ í¬ì§€ì…˜ ìœ ì§€
              â”‚   ê·¸ ì™¸ ëª¨ë“œ:   ì „ëŸ‰ ì²­ì‚°
              â”‚
              â”œâ”€â”€ ì¼ì¼ ê²°ì‚°
              â”‚     â”œâ”€â”€ ì‹¤í˜„ PnL ê³„ì‚°
              â”‚     â”œâ”€â”€ ìˆ˜ìˆ˜ë£Œ í•©ì‚°
              â”‚     â”œâ”€â”€ íŠ¸ë ˆì´ë“œ ë¡œê·¸ ì €ì¥
              â”‚     â””â”€â”€ í…”ë ˆê·¸ë¨ ì¼ì¼ ë¦¬í¬íŠ¸ ì „ì†¡
              â”‚
              â””â”€â”€ í¬ì§€ì…˜ ìŠ¤ëƒ…ìƒ· ì €ì¥ (ë³µê¸°ìš©)

05:30 KST  â”€â”€â”€ ì‹œìŠ¤í…œ ëŒ€ê¸° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
              â”‚
              â””â”€â”€ WebSocket ì¢…ë£Œ, Redis ìºì‹œ ìœ ì§€
```

---

## 4. ì‹œë®¬ë ˆì´ì…˜â†”ì‹¤ì „ ê²€ì¦ ì²´ê³„

### 4.1 Shadow Mode (ê·¸ë¦¼ì ë§¤ë§¤)

ì‹¤ì „ ì „í™˜ ì „ ë°˜ë“œì‹œ ê±°ì³ì•¼ í•˜ëŠ” ê²€ì¦ ë‹¨ê³„. ì‹¤ ë°ì´í„°ë¡œ ì‹œê·¸ë„ë§Œ ìƒì„±í•˜ê³  ì£¼ë¬¸ì€ í•˜ì§€ ì•Šë˜, ê°€ìƒ ì²´ê²°ì„ ê¸°ë¡.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SHADOW MODE                              â”‚
â”‚                                                               â”‚
â”‚  [ì‹¤ì‹œê°„ ë°ì´í„°]                                              â”‚
â”‚        â”‚                                                      â”‚
â”‚        â”œâ”€â”€â”€â”€ ì‹œê·¸ë„ ì—”ì§„ â”€â”€â”€â”€ ì‹œê·¸ë„ ë¡œê·¸ (DB)               â”‚
â”‚        â”‚                        â”‚                             â”‚
â”‚        â”‚                  â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                       â”‚
â”‚        â”‚                  â–¼           â–¼                       â”‚
â”‚        â”‚            ê°€ìƒ ì²´ê²°      ì‹¤ ì£¼ë¬¸                     â”‚
â”‚        â”‚            (shadow)      (DISABLED)                  â”‚
â”‚        â”‚                â”‚                                     â”‚
â”‚        â”‚                â–¼                                     â”‚
â”‚        â”‚          ê°€ìƒ PnL ì¶”ì                                â”‚
â”‚        â”‚                â”‚                                     â”‚
â”‚        â”‚                â–¼                                     â”‚
â”‚        â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚        â”‚          â”‚  Shadow vs Backtest     â”‚                 â”‚
â”‚        â”‚          â”‚  ì„±ê³¼ ë¹„êµ ë¦¬í¬íŠ¸       â”‚                 â”‚
â”‚        â”‚          â”‚                         â”‚                 â”‚
â”‚        â”‚          â”‚  â€¢ ì‹œê·¸ë„ ì¼ì¹˜ìœ¨        â”‚                 â”‚
â”‚        â”‚          â”‚  â€¢ ìˆ˜ìµë¥  ì°¨ì´          â”‚                 â”‚
â”‚        â”‚          â”‚  â€¢ ì²´ê²° ê°€ê²© ìŠ¬ë¦¬í”¼ì§€   â”‚                 â”‚
â”‚        â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                               â”‚
â”‚  [í•©ê²© ê¸°ì¤€]                                                  â”‚
â”‚  â€¢ ì‹œê·¸ë„ ì¼ì¹˜ìœ¨ â‰¥ 95% (ë™ì¼ ì¡°ê±´ â†’ ë™ì¼ ì‹œê·¸ë„)             â”‚
â”‚  â€¢ ê°€ìƒ PnL vs ë°±í…ŒìŠ¤íŠ¸ PnL ì°¨ì´ â‰¤ 2%                        â”‚
â”‚  â€¢ ì—°ì† 5ì˜ì—…ì¼ ì´ìƒ ë¬´ì‚¬ê³  ìš´ì˜                              â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 A/B ë¹„êµ í”„ë ˆì„ì›Œí¬

```python
class BacktestVsLiveComparator:
    """ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼ì™€ ì‹¤ì œ ê±°ë˜ ê²°ê³¼ ë¹„êµ"""

    def compare(self, backtest_trades: list, live_trades: list) -> ComparisonReport:
        """
        ë™ì¼ ê¸°ê°„ì˜ ë°±í…ŒìŠ¤íŠ¸ vs ì‹¤ê±°ë˜ë¥¼ ë¹„êµ

        Returns:
            signal_match_rate: ì‹œê·¸ë„ ë°œìƒ ì¼ì¹˜ìœ¨
            execution_gap: ì²´ê²° ê°€ê²© ì°¨ì´ (ìŠ¬ë¦¬í”¼ì§€)
            pnl_deviation: ìˆ˜ìµë¥  í¸ì°¨
            missed_signals: ë°±í…ŒìŠ¤íŠ¸ì—ì„œë§Œ ë°œìƒí•œ ì‹œê·¸ë„ (ì‹¤ì „ ë¯¸ì²´ê²°)
            extra_signals: ì‹¤ì „ì—ì„œë§Œ ë°œìƒí•œ ì‹œê·¸ë„ (ë°ì´í„° ì°¨ì´)
        """
        ...
```

---

## 5. ë°°í¬ íŒŒì´í”„ë¼ì¸

### 5.1 í˜„ì¬ ë°°í¬ íë¦„

```
[ê°œë°œì MacBook]
    â”‚  git push
    â–¼
[GitHub main]
    â”‚  ssh â†’ git pull (ìˆ˜ë™)
    â–¼
[iMac]
    â”‚  docker compose down && up --build (ìˆ˜ë™)
    â–¼
[í”„ë¡œë•ì…˜ ì„œë¹„ìŠ¤]
```

### 5.2 ëª©í‘œ: ë°˜ìë™ íŒŒì´í”„ë¼ì¸

```
[ptj_stock_lab]                              [ptj_stock]
    â”‚                                            â”‚
    â”‚ Optuna ìµœì í™” ì™„ë£Œ                          â”‚
    â”‚     â†“                                      â”‚
    â”‚ v5_optuna_best.json ìƒì„±                   â”‚
    â”‚     â†“                                      â”‚
    â”‚ ë°±í…ŒìŠ¤íŠ¸ ì¬ê²€ì¦ (ìë™)                      â”‚
    â”‚     â†“ PASS                                 â”‚
    â”‚ v5_production.json í™•ì • (ìˆ˜ë™ ìŠ¹ì¸)         â”‚
    â”‚     â†“                                      â”‚
    â”‚ git tag release-v5.X.Y                     â”‚
    â”‚                                            â”‚
    â””â”€â”€â”€â”€ ptj_signals íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                                  â”‚
                                            git pull
                                                  â”‚
                                            Shadow Mode ê°€ë™ (1ì¼)
                                                  â”‚ PASS
                                            Auto Mode ì „í™˜ (ìˆ˜ë™ ìŠ¹ì¸)
                                                  â”‚
                                            [í”„ë¡œë•ì…˜ LIVE]
```

### 5.3 ì²´í¬ë¦¬ìŠ¤íŠ¸: ìƒˆ ë²„ì „ í”„ë¡œëª¨ì…˜

```
â–¡ 1. ë°±í…ŒìŠ¤íŠ¸ ê²€ì¦
   â–¡ v5 baseline ëŒ€ë¹„ Sharpe â‰¥ ë™ì¼ or ê°œì„ 
   â–¡ MDD â‰¤ ê¸°ì¡´ MDD
   â–¡ ìŠ¹ë¥  â‰¥ ê¸°ì¡´ ìŠ¹ë¥ 
   â–¡ ìˆ˜ìˆ˜ë£Œ ë°˜ì˜ í›„ ì–‘ì˜ ìˆ˜ìµ

â–¡ 2. íŒŒë¼ë¯¸í„° ê²€ì¦
   â–¡ Optuna best params â†’ production.json ë³µì‚¬
   â–¡ JSON schema ê²€ì¦ í†µê³¼
   â–¡ ê·¹ë‹¨ê°’ ì—†ìŒ (stop_loss > -15%, gap < 10%, ë“±)

â–¡ 3. ì½”ë“œ ê²€ì¦
   â–¡ ptj_signals íŒ¨í‚¤ì§€ import ì—ëŸ¬ ì—†ìŒ
   â–¡ ì‹œê·¸ë„ ìœ ë‹› í…ŒìŠ¤íŠ¸ í†µê³¼
   â–¡ MarketSnapshot â†’ SignalAction ë³€í™˜ ì •ìƒ

â–¡ 4. Shadow ê²€ì¦ (1~3 ì˜ì—…ì¼)
   â–¡ ì‹œê·¸ë„ ì¼ì¹˜ìœ¨ â‰¥ 95%
   â–¡ ë¹„ì •ìƒ ì£¼ë¬¸ ìƒì„± ì—†ìŒ
   â–¡ ë©”ëª¨ë¦¬/CPU ì•ˆì •

â–¡ 5. ë°°í¬
   â–¡ iMac docker compose ì¬ë¹Œë“œ
   â–¡ ì„œë¹„ìŠ¤ health check ì „ì²´ í†µê³¼
   â–¡ auto_trade_enabled = True ì „í™˜
```

---

## 6. êµ¬í˜„ ìš°ì„ ìˆœìœ„

### Phase 1: ê¸°ë°˜ ì •ë¹„ (í•µì‹¬ ê°­ í•´ì†Œ)

| # | ì‘ì—… | íš¨ê³¼ | ë‚œì´ë„ |
|---|------|------|--------|
| 1-1 | **ê³µí†µ ì‹œê·¸ë„ ì¸í„°í˜ì´ìŠ¤** (protocol.py, types.py) ì •ì˜ | ì‹œë®¬ë ˆì´ì…˜/í”„ë¡œë•ì…˜ ê³„ì•½ í†µì¼ | ì¤‘ |
| 1-2 | **íŒŒë¼ë¯¸í„° JSON íŒŒì¼** ê¸°ë°˜ ê´€ë¦¬ ë„ì… | ìˆ˜ë™ ë³µì‚¬ ì‹¤ìˆ˜ ë°©ì§€ | ë‚® |
| 1-3 | **í¬ì§€ì…˜ ì •í•©ì„± ì²´í¬** (KIS ì”ê³  vs ë‚´ë¶€ DB) | ì‹¤ì”ê³  ë¶ˆì¼ì¹˜ ë°©ì§€ | ì¤‘ |
| 1-4 | **ì¼ì¼ ì†ì‹¤ í•œë„** + Kill Switch | ì‚¬ê³  ì‹œ í”¼í•´ ì œí•œ | ë‚® |

### Phase 2: ê²€ì¦ ì²´ê³„ (ì‹ ë¢°ë„ í™•ë³´)

| # | ì‘ì—… | íš¨ê³¼ | ë‚œì´ë„ |
|---|------|------|--------|
| 2-1 | **Shadow Mode** êµ¬í˜„ | ì‹¤ì „ ì „í™˜ ì „ ê²€ì¦ ê°€ëŠ¥ | ì¤‘ |
| 2-2 | **ìŠ¬ë¦¬í”¼ì§€ ëª¨ë¸** ë°±í…ŒìŠ¤íŠ¸ ì ìš© | ë°±í…ŒìŠ¤íŠ¸ ë‚™ê´€ í¸í–¥ ì œê±° | ë‚® |
| 2-3 | **ì‹œê·¸ë„ ìœ ë‹› í…ŒìŠ¤íŠ¸** (ê³ ì • ì…ë ¥ â†’ ê¸°ëŒ€ ì¶œë ¥) | ì—”ì§„ íšŒê·€ ë°©ì§€ | ì¤‘ |
| 2-4 | **BacktestVsLive ë¹„êµ ë„êµ¬** | ì‹œë®¬ë ˆì´ì…˜ ì •í™•ë„ ì¸¡ì • | ì¤‘ |

### Phase 3: ìš´ì˜ ê³ ë„í™”

| # | ì‘ì—… | íš¨ê³¼ | ë‚œì´ë„ |
|---|------|------|--------|
| 3-1 | **í…”ë ˆê·¸ë¨ ì•Œë¦¼** (ì²´ê²°, ì†ì ˆ, ì¼ì¼ ë¦¬í¬íŠ¸) | ì›ê²© ëª¨ë‹ˆí„°ë§ | ë‚® |
| 3-2 | **ptj_signals íŒ¨í‚¤ì§€** ë¶„ë¦¬ (pip install ê°€ëŠ¥) | ì½”ë“œ ì¤‘ë³µ ì™„ì „ ì œê±° | ë†’ |
| 3-3 | **í”„ë¡œë•ì…˜ CB/íš¡ë³´ê°ì§€** ì´ì‹ | ì‹œë®¬ë ˆì´ì…˜ ì•ˆì „ì¥ì¹˜ ì‹¤ì „ ì ìš© | ì¤‘ |
| 3-4 | **ìë™ í”„ë¡œëª¨ì…˜ íŒŒì´í”„ë¼ì¸** (CI/CD) | ë°°í¬ ìë™í™” | ë†’ |

---

## 7. ê²°ë¡ 

### í•µì‹¬ ë©”ì‹œì§€

í˜„ì¬ ì‹œë®¬ë ˆì´ì…˜(ptj_stock_lab)ì€ **ì „ëµ ì—°êµ¬/ê²€ì¦ ë„êµ¬ë¡œì„œ ë§¤ìš° ì„±ìˆ™**í•œ ìƒíƒœ.
í”„ë¡œë•ì…˜(ptj_stock)ë„ **ì‹¤ê±°ë˜ ì¸í”„ë¼ê°€ ì´ë¯¸ ë™ì‘** ì¤‘.

**ê°€ì¥ í° ë¬¸ì œëŠ” ë‘˜ ì‚¬ì´ì˜ ë‹¤ë¦¬(bridge)ê°€ ìˆ˜ë™ ë³µì‚¬ì— ì˜ì¡´í•œë‹¤ëŠ” ì .**

```
í˜„ì¬:  lab â”€â”€(ìˆ˜ë™ ë³µì‚¬)â”€â”€â–¶ production     â† ë²„ì „ ë¶ˆì¼ì¹˜, íŒŒë¼ë¯¸í„° ì˜¤ë¥˜ ìœ„í—˜
ëª©í‘œ:  lab â”€â”€(ê³µìœ  íŒ¨í‚¤ì§€)â”€â”€â–¶ production    â† ë™ì¼ ì—”ì§„ ë³´ì¥
```

Phase 1 (ê³µí†µ ì¸í„°í˜ì´ìŠ¤ + íŒŒë¼ë¯¸í„° ê´€ë¦¬ + í¬ì§€ì…˜ ì •í•©ì„±)ë§Œ ì™„ë£Œí•´ë„ ì‹¤ì „ ìš´ìš©ì˜ ì‹ ë¢°ë„ê°€ í¬ê²Œ í–¥ìƒë¨. Shadow Mode(Phase 2)ê¹Œì§€ ì™„ë£Œí•˜ë©´ "ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼ = ì‹¤ì „ ê²°ê³¼"ì— ëŒ€í•œ ì •ëŸ‰ì  ê²€ì¦ì´ ê°€ëŠ¥í•´ì§.

### ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥í•œ Quick Win

1. `v5_production.json` íŒŒë¼ë¯¸í„° íŒŒì¼ ë„ì… â†’ ì–‘ìª½ repoì—ì„œ ì½ê¸°
2. í”„ë¡œë•ì…˜ì— ì¼ì¼ ì†ì‹¤ í•œë„ ($500) í•˜ë“œì½”ë”©
3. í…”ë ˆê·¸ë¨ ë´‡ìœ¼ë¡œ ì²´ê²°/ì†ì ˆ ì•Œë¦¼ ì¶”ê°€
4. KIS ì”ê³  ì •í•©ì„± ì²´í¬ (5ë¶„ cron)

ì´ ë„¤ ê°€ì§€ëŠ” ì½”ë“œ êµ¬ì¡° ë³€ê²½ ì—†ì´ ê¸°ì¡´ ì‹œìŠ¤í…œì— ë°”ë¡œ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” í•­ëª©ë“¤.
